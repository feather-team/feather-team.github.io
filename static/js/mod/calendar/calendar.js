define("/static/js/mod/calendar/calendar.js",function(t,e,a){var n=t("jquery"),r=t("util"),i=r.string.toPad,o=document.body,s=a.exports=function(t){this.options=n.extend({dom:o,target:null,handle:null,maxDate:null,minDate:null,dateFormat:"Y-m-d",callback:function(){},onSelect:function(){this.close()}},t||{}),this.init()};return s.prototype={init:function(){var t=this,e=t.options;t.options.target&&(t.target=n(t.options.target)),t.wraper=n('<div class="ui-calendar"></div>'),t.dom=n(t.options.dom).append(t.wraper),t.dom[0]==o&&t.wraper.css("position","absolute"),e.minDate&&(t.minDate="string"==typeof e.minDate?e.minDate:t.getDate(e.minDate)),e.maxDate&&(t.maxDate="string"==typeof e.maxDate?e.maxDate:t.getDate(e.maxDate)),t.toMonth(),t.bindEvent(),t.close()},bindEvent:function(){var t=this,e=t.options,a=e.handle?n(e.handle):t.target;a&&a.click(function(){t.open(),t.reset()}),n(window).on("resize scroll",function(){t.reset()}),t.wraper.click(function(a){var r=n(a.target);if(r.hasClass("ui-calendar-prev"))t.prevMonth();else if(r.hasClass("ui-calendar-next"))t.nextMonth();else if(r.hasClass("ui-calendar-item")&&!r.hasClass("ui-calendar-item-disable")){var i=r.attr("data-calendar-date");e.onSelect&&e.onSelect.call(t,i),t.target&&t.target.val(i).html(i)}})},prevMonth:function(){this.toMonth(this.year,this.month-1)},nextMonth:function(){this.toMonth(this.year,this.month+1)},toMonth:function(t,e){var a=this,n=new Date;t&&n.setFullYear(t),null!=e&&n.setMonth(e),a.year=n.getFullYear(),a.month=n.getMonth(),a.createCalendar(),a.options.callback&&a.options.callback.call(a),a.reset()},createCalendar:function(){var t=this;t.wraper.find(".ui-calendar-container").remove(),n('<table class="ui-calendar-container" />').appendTo(t.wraper).append(t.createCalendarHeader(),t.createCalendarItems())},createCalendarItems:function(){for(var t=this,e=(t.options,new Date(t.year,t.month,1)),a=new Date(t.year,t.month+1,0),n=t.getDate(new Date),r=e.getDay(),i=a.getDate(),o=Math.ceil((r+i)/7),s=[],l=1,c=0;o>c;c++){for(var d=[],h=0;7>h;h++)if(r>h&&0==c||l>i)d.push("<td>&nbsp;</td>");else if(i>=l){var u=t.getDate(new Date(t.year,t.month,l)),p="ui-calendar-item";n==u&&(p+=" ui-calendar-item-today"),(t.minDate&&u<t.minDate||t.maxDate&&u>t.maxDate)&&(p+=" ui-calendar-item-disable"),d.push('<td><a href="javascript:" data-calendar-date="'+u+'" class="'+p+'">'+l++ +"</a></td>")}s.push("<tr>"+d.join("")+"</tr>")}return"<tbody>"+s.join("")+"</tbody>"},createCalendarHeader:function(){var t=[],e=this.year+"."+i(this.month+1,0,2,!0);return n.each(s.WEEKNAME,function(e,a){t.push("<th>"+a+"</th>")}),["<thead>",'<tr class="ui-calendar-title">','<th colspan="7">','<a href="javascript:" class="ui-calendar-next"></a>','<a href="javascript:" class="ui-calendar-prev"></a>','<span class="ui-calendar-date">'+e+"</span>","</th>","</tr>","<tr>"+t.join("")+"</tr>","</thead>"].join("")},open:function(){this.wraper.show(),this.reset()},close:function(){this.wraper.hide()},reset:function(){if(this.target){var t,e=this,a=e.target.offset(),r=document.body.scrollTop||document.documentElement.scrollTop;t=r+n(window).height()<a.top+e.wraper.outerHeight()?a.top-e.wraper.outerHeight()-1:a.top+e.target.outerHeight()+1,e.wraper.css({left:a.left,top:t})}},getDate:function(t){return r.date.date(this.options.dateFormat,t.getTime())}},s.WEEKNAME=["日","一","二","三","四","五","六"],s});