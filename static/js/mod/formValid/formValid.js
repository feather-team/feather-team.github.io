define("/static/js/mod/formValid/formValid.js",function(e){function t(e){this.options=r.extend({dom:null,rules:{},showSuccessStatus:!1},e||{}),this.init()}var r=e("jquery");return t.prototype={init:function(){this.dom=r(this.options.dom),this.initRules(),this.reset()},initRules:function(){{var e=this,i=t.DEFAULT_RULES,s=t.ATTRIBUTE_PREFIX;t.ATTIBUTE_LENGTH,t.ATTRIBUTE_RULE}r.each(e.dom[0].elements,function(t,n){var u=n.name;if(u){var o=r(n);r.each(i,function(t,r){var i=s+t;null!=o.attr(i)&&e.addRule(u,{rule:"length"==t?new RegExp("^\\S{"+o.attr(i)+"}$"):r.rule,errorText:o.attr(i+"-error")||r.errorText,successText:o.attr(i+"-success")||r.successText})})}})},check:function(e){var t,i=this,s=!0,n=i.options.rules;return i.reset(e,!1),e?(t={},t[e]=n[e]||{}):t=n,r.each(t,function(e,t){var n=i.getElement(e),u=n.val(),o=!0;r.isArray(t)||(t=[t]);for(var a,l=0;l<t.length;l++)if(a=t[l],"function"!=typeof a.rule||a.rule(u)?a.rule.constructor!=RegExp||a.rule.test(u)||(s=!1,o=!1):(s=!1,o=!1),!o)return void i.error(e,a.errorText);i.success(e,a.successText)}),s},error:function(e,t){this.setText(e,t||"","ui-formvalid-field-error")},success:function(e,t){(null!=t||this.options.showSuccessStatus)&&(t=t||"",this.setText(e,t,"ui-formvalid-field-success"))},setText:function(e,t,r){var i=this.getElement(e).parent();i.find('.ui-formvalid-field[data-formvalid-target="'+e+'"]').remove(),null!=t&&i.append('<span class="ui-formvalid-field '+r+'" data-formvalid-target="'+e+'">'+(t||"&nbsp;")+"</span>")},reset:function(e,i){var s=this;if(e){var n;(null==i||i)&&(n=s.getElement(e).attr(t.ATTRIBUTE_DEFAULT)),s.setText(e,n,"ui-formvalid-field-default")}else r.each(s.dom[0].elements,function(e,u){var o=u.name;o&&((null==i||i)&&(n=r(u).attr(t.ATTRIBUTE_DEFAULT)),s.setText(o,n,"ui-formvalid-field-default"))})},addRule:function(e,t){var i=this.options.rules[e]||[];r.isArray(i)||(i=[i]),i.push(t),this.options.rules[e]=i},getElement:function(e){return this.dom.find("[name="+e+"]")}},r.extend(t,{ATTRIBUTE_PREFIX:"data-formvalid-",DEFAULT_RULES:{required:{rule:/\S+/,errorText:"该字段必填"},email:{rule:/^[a-z][\w_-]*@[\w_-]+(?:\.[\w_-])+$/i,errorText:"邮箱地址格式错误"},number:{rule:/^\d+$/,errorText:"该字段必须为数字"},length:{rule:/^[\s\S]*$/}}}),t.ATTRIBUTE_DEFAULT=t.ATTRIBUTE_PREFIX+"default",t});