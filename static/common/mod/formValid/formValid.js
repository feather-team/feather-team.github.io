define("/static/common/mod/formValid/formValid.js",function(e){function t(e){this.options=r.extend({dom:null,rules:{},showSuccessStatus:!1},e||{}),this.init()}var r=e("common:jquery");return t.prototype={init:function(){this.dom=r(this.options.dom),this.initRules(),this.reset()},initRules:function(){{var e=this,i=t.DEFAULT_RULES,s=t.ATTRIBUTE_PREFIX;t.ATTIBUTE_LENGTH,t.ATTRIBUTE_RULE}e.getElement().each(function(){var t=this.name;if(t){var n=r(this);r.each(i,function(r,i){var u=s+r;null!=n.attr(u)&&e.addRule(t,{rule:"length"==r?new RegExp("^\\S{"+n.attr(u)+"}$"):i.rule,errorText:n.attr(u+"-error")||i.errorText,successText:n.attr(u+"-success")||i.successText})})}})},check:function(e){var t,i=this,s=!0,n=i.options.rules;return i.reset(e,!1),e?(t={},t[e]=n[e]||{}):t=n,r.each(t,function(e,t){var n=i.getElement(e),u=n.val(),o=!0;if(n.length){r.isArray(t)||(t=[t]);for(var a,l=0;l<t.length;l++)if(a=t[l],"function"!=typeof a.rule||a.rule(u)?a.rule.constructor!=RegExp||a.rule.test(u)||(s=!1,o=!1):(s=!1,o=!1),!o)return void i.error(e,a.errorText);i.success(e,a.successText)}}),s},error:function(e,t){this.setText(e,t||"","ui-formvalid-field-error")},success:function(e,t){(null!=t||this.options.showSuccessStatus)&&(t=t||"",this.setText(e,t,"ui-formvalid-field-success"))},setText:function(e,t,r){var i=this.getElement(e).parent();i.find('.ui-formvalid-field[data-formvalid-target="'+e+'"]').remove(),null!=t&&i.append('<span class="ui-formvalid-field '+r+'" data-formvalid-target="'+e+'">'+(t||"&nbsp;")+"</span>")},reset:function(e,i){var s=this;if(e){var n;(null==i||i)&&(n=s.getElement(e).attr(t.ATTRIBUTE_DEFAULT)),s.setText(e,n,"ui-formvalid-field-default")}else s.getElement().each(function(){var e=this.name;e&&((null==i||i)&&(n=r(this).attr(t.ATTRIBUTE_DEFAULT)),s.setText(e,n,"ui-formvalid-field-default"))})},addRule:function(e,t){var i=this.options.rules[e]||[];r.isArray(i)||(i=[i]),i.push(t),this.options.rules[e]=i},getElement:function(e){return this.dom.find(e?"[name="+e+"]":"[name]")}},r.extend(t,{ATTRIBUTE_PREFIX:"data-formvalid-",DEFAULT_RULES:{required:{rule:/\S+/,errorText:"该字段必填"},email:{rule:/^[a-z][\w_-]*@[\w_-]+(?:\.[\w_-])+$/i,errorText:"邮箱地址格式错误"},number:{rule:/^\d+$/,errorText:"该字段必须为数字"},length:{rule:/^[\s\S]*$/}}}),t.ATTRIBUTE_DEFAULT=t.ATTRIBUTE_PREFIX+"default",t});