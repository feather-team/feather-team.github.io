!function(t,e){"function"==typeof define?define("/static/common/mod/formValid/formValid.js",function(t){return e(t("common:jquery"))}):(t.FeatherUi=t.FeatherUi||{},t.FeatherUi.FormValid=e(t.jQuery||t.$))}(window,function(t){function e(e){this.options=t.extend({dom:null,rules:{},showSuccessStatus:!1,showErrorStatus:!0,errorStop:!1,error:function(){},success:function(){}},e||{}),this.init()}return e.prototype={init:function(){this.dom=t(this.options.dom),this.initRules(),this.reset()},initRules:function(){{var r=this,i=e.DEFAULT_RULES,s=e.ATTRIBUTE_PREFIX;e.ATTIBUTE_LENGTH,e.ATTRIBUTE_RULE}r.getElement().each(function(){var e=this.name;if(e){var n=t(this);t.each(i,function(t,i){var o=s+t;null!=n.attr(o)&&r.addRule(e,{rule:"length"==t?new RegExp("^\\S{"+n.attr(o)+"}$"):i.rule,errorText:n.attr(o+"-error")||i.errorText,successText:n.attr(o+"-success")||i.successText})})}})},check:function(e){var r,i=this,s=!0,n=i.options.rules,o=i.options.errorStop;i.reset(e,!1),e?(r={},r[e]=n[e]||{}):r=n;for(var u in r){var a=r[u],l=i.getElement(u),c=l.val(),f=!0;if(!l.length)return;t.isArray(a)||(a=[a]);for(var T,d=0;d<a.length;d++)if(T=a[d],"function"!=typeof T.rule||T.rule(c,u)?T.rule.constructor!=RegExp||T.rule.test(c,u)||(s=!1,f=!1):(s=!1,f=!1),!f){if(i.error(u,T.errorText),o)return s;break}f&&i.success(u,T.successText)}return s},error:function(t,e){this.options.showErrorStatus&&(e=e||"",this.setText(t,e||"","ui-formvalid-field-error")),this.options.error&&this.options.error.call(this,t,e)},success:function(t,e){this.options.showSuccessStatus&&(e=e||"",this.setText(t,e,"ui-formvalid-field-success")),this.options.success&&this.options.success.call(this,t,e)},setText:function(t,e,r){var i=this.getElement(t).parent();i.find('.ui-formvalid-field[data-formvalid-target="'+t+'"]').remove(),null!=e&&i.append('<span class="ui-formvalid-field '+r+'" data-formvalid-target="'+t+'">'+(e||"&nbsp;")+"</span>")},reset:function(r,i){var s=this;if(r){var n;(null==i||i)&&(n=s.getElement(r).attr(e.ATTRIBUTE_DEFAULT)),s.setText(r,n,"ui-formvalid-field-default")}else s.getElement().each(function(){var r=this.name;r&&((null==i||i)&&(n=t(this).attr(e.ATTRIBUTE_DEFAULT)),s.setText(r,n,"ui-formvalid-field-default"))})},addRule:function(e,r){var i=this.options.rules[e]||[];t.isArray(i)||(i=[i]),i.push(r),this.options.rules[e]=i},getElement:function(t){return this.dom.find(t?"[name="+t+"]":"[name]")}},t.extend(e,{ATTRIBUTE_PREFIX:"data-formvalid-",DEFAULT_RULES:{required:{rule:/\S+/,errorText:"该字段必填"},email:{rule:/^[a-z][\w_-]*@[\w_-]+(?:\.[\w_-]+)+$/i,errorText:"邮箱地址格式错误"},number:{rule:/^\d+$/,errorText:"该字段必须为数字"},length:{rule:/^[\s\S]*$/}}}),e.ATTRIBUTE_DEFAULT=e.ATTRIBUTE_PREFIX+"default",e});