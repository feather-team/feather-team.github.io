define("/static/common/mod/lightbox/lightbox.js",function(t,i,n){var o=t("common:jquery"),e=t("common:mask"),s=document.body,a=window.Math,c=n.exports=function(t){this.options=o.extend({dom:null,srcAttr:"data-lightbox-url"},t||{}),this.init()};c.prototype={init:function(){var t=this;t.doms=o(this.options.dom),t.mask=new e({autoOpen:!1}),t.index=0,t.container=o(['<div class="ui-lightbox-container">','<div class="ui-lightbox-content">','<a href="javascript:void(0);" class="ui-lightbox-prev"></a>','<a href="javascript:void(0);" class="ui-lightbox-next"></a>',"</div>",'<div class="ui-lightbox-bottom">','<a href="javascript:void(0);" class="ui-lightbox-close">&times;</a>','<span class="ui-lightbox-alt"></span>',"</div>","</div>"].join("")).appendTo(s),t.content=t.container.find(".ui-lightbox-content"),t.bottom=t.container.find(".ui-lightbox-bottom"),t.prev=t.container.find(".ui-lightbox-prev"),t.next=t.container.find(".ui-lightbox-next"),t.items=o.map(t.doms,function(i){return{alt:i.alt,src:o(i).attr(t.options.srcAttr)}}),t.bindEvent()},bindEvent:function(){var t=this;t.doms.each(function(i){o(this).click(function(){return t.open(i),!1})}),o(window).resize(function(){t.resetPosition()}),t.bottom.find(".ui-lightbox-close").click(function(){t.close()}),t.prev.click(function(){t.open(--t.index)}),t.next.click(function(){t.open(++t.index)})},resetPosition:function(){this.container.css("left",parseInt((o(window).width()-this.container.outerWidth())/2))},load:function(t){var i=this,n=i.getItem(t),e=i.items[t];if(i.content.find("img").hide(),i.bottom.hide().find(".ui-lightbox-alt").html(e.alt),i.prev.hide(),i.next.hide(),n.length)i.loadComplete(n.show());else{o("<img />").attr({src:e.src+"?lightbox-random="+a.random(),alt:e.alt,"data-lightbox-index":t}).load(function(){i.loadComplete(o(this))}).appendTo(i.content)}},loadComplete:function(t){var i=this,n=i.content.css("opacity",0),o=t.width(),e=t.height(),s=i.container.width(),d=n.height(),h=a.abs,l=a.max,r=c.DEFAULT_TIME;i.container.animate({width:o,left:"-="+(o-s)/2},r*h(o-s)/l(o,s),function(){i.resetPosition(),n.animate({height:e},time2=r*h(e-d)/l(e,d)).animate({opacity:1},r,function(){i.index&&i.prev.show(),i.index<i.items.length-1&&i.next.show(),i.bottom.slideDown()})})},getItem:function(t){return this.content.find("[data-lightbox-index="+t+"]")},open:function(t){var i=this;i.items.length&&(i.mask.open(),i.container.show(),i.resetPosition(),i.load(i.index=null==t?i.index:t))},close:function(){this.mask.close(),this.container.hide()},destroy:function(){this.mask.detroy(),this.container.remove(),this.items.length=0}},c.DEFAULT_TIME=1e3});