!function(t,i){"function"==typeof define?define("/static/common/mod/lightbox/lightbox.js",function(t){return i(t("common:jquery"),t("common:mask"))}):(t.FeatherUi=t.FeatherUi||{},t.FeatherUi.Class=i(t.jQuery||t.$,t.FeatherUi.Mask))}(window,function(t,i){var n=document,o=window.Math,e=function(i){this.options=t.extend({dom:null,srcAttr:"data-lightbox-url"},i||{}),this.init()};return e.prototype={init:function(){var o=this;o.doms=t(this.options.dom),o.mask=new i({autoOpen:!1}),o.index=0,o.container=t(['<div class="ui-lightbox-container">','<div class="ui-lightbox-content">','<a href="javascript:void(0);" class="ui-lightbox-prev"></a>','<a href="javascript:void(0);" class="ui-lightbox-next"></a>',"</div>",'<div class="ui-lightbox-bottom">','<a href="javascript:void(0);" class="ui-lightbox-close">&times;</a>','<span class="ui-lightbox-alt"></span>',"</div>","</div>"].join("")).appendTo(n.body),o.content=o.container.find(".ui-lightbox-content"),o.bottom=o.container.find(".ui-lightbox-bottom"),o.prev=o.container.find(".ui-lightbox-prev"),o.next=o.container.find(".ui-lightbox-next"),o.items=t.map(o.doms,function(i){return{alt:i.alt,src:t(i).attr(o.options.srcAttr)}}),o.bindEvent()},bindEvent:function(){var i=this;i.doms.each(function(n){t(this).click(function(){return i.open(n),!1})}),t(window).resize(function(){i.resetPosition()}),i.bottom.find(".ui-lightbox-close").click(function(){i.close()}),i.prev.click(function(){i.open(--i.index)}),i.next.click(function(){i.open(++i.index)})},resetPosition:function(){this.container.css("left",parseInt((t(window).width()-this.container.outerWidth())/2))},load:function(i){var n=this,e=n.getItem(i),a=n.items[i];if(n.content.find("img").hide(),n.bottom.hide().find(".ui-lightbox-alt").html(a.alt),n.prev.hide(),n.next.hide(),e.length)n.loadComplete(e);else{t("<img />").attr({src:a.src+"?lightbox-random="+o.random(),alt:a.alt,"data-lightbox-index":i}).hide().bind("load error",function(){n.loadComplete(t(this))}).appendTo(n.content)}},loadComplete:function(t){var i=this,n=i.content.css("opacity",0),a=t.width(),s=t.height(),c=i.container.width(),r=n.height(),h=o.abs,d=o.max,l=e.DEFAULT_TIME;t.show(),i.container.animate({width:a,left:"-="+(a-c)/2},l*h(a-c)/d(a,c),function(){i.resetPosition(),n.animate({height:s},time2=l*h(s-r)/d(s,r)).animate({opacity:1},l,function(){i.index&&i.prev.show(),i.index<i.items.length-1&&i.next.show(),i.bottom.slideDown()})})},getItem:function(t){return this.content.find("[data-lightbox-index="+t+"]")},open:function(t){var i=this;i.items.length&&(i.mask.open(),i.container.show(),i.resetPosition(),i.load(i.index=null==t?i.index:t))},close:function(){this.mask.close(),this.container.hide()},destroy:function(){this.mask.detroy(),this.container.remove(),this.items.length=0}},e.DEFAULT_TIME=1e3,e});