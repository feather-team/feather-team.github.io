!function(t,i){"function"==typeof define?define("/static/common/mod/droplist/droplist.js",function(t){return i(t("common:jquery"))}):(t.FeatherUi=t.FeatherUi||{},t.FeatherUi.DropList=i(t.jQuery||t.$))}(window,function(t){function i(i){this.options=t.extend({items:{},list:null,dom:null,container:document.body,width:!1,callback:function(){}},i||{}),this.init()}return i.prototype={init:function(){var i=this,e=i.options;i.value="",i.wraper=t('<div class="ui-droplist"><i class="ui-droplist-arrow"></i></div>').appendTo(e.container),i.select=t('<span class="ui-droplist-select"></span>').appendTo(i.wraper),i.list=t('<ul class="ui-droplist-list"></ul>').appendTo(i.wraper),i.dom=e.dom?t(e.dom):null,i.setList(e.dom||e.list||e.items),i.resetWidth(),i.bindEvent()},bindEvent:function(){var i=this,e=i.options;i.wraper.hover(function(){!i.wraper.hasClass("ui-droplist-disabled")&&i.openList()},function(){i.closeList()}),i.list.delegate(".ui-droplist-item","click",function(){i.closeList();var s=t(this),o=s.attr("data-droplist-key"),a=s.attr("data-droplist-value");e.callback&&e.callback.call(this,o,a),i.setValue(a,o)})},openList:function(){var t=this;t.wraper.addClass("ui-droplist-open"),t.resetWidth()},closeList:function(){this.wraper.removeClass("ui-droplist-open")},setList:function(e,s,o){var a,l=this;if((e.nodeType||e instanceof t||"string"==typeof e)&&(a=t(e),e=l.dom2list(e)),l.list.html(i.createListHtml(e)),l.resetWidth(),l.dom&&(!a||a[0]!==l.dom[0])&&l.resetDom(e),s)l.setValue(s,o);else{var r=t(".ui-droplist-item:first",l.list);l.setValue(r.attr("data-droplist-value"),r.attr("data-droplist-key"))}},resetDom:function(t){this.dom.html(i.createDomHtml(t))},resetWidth:function(){var t=this;t.list.css("width","auto"),t.wraper.add(t.list).css("width",t.options.width||t.list.width())},setValue:function(t,i){var e=this;if(!i){var s=e.list.find('[data-droplist-value="'+t+'"]');s.length&&(i=s.attr("data-droplist-key"))}e.select.html(i),e.value=t,e.dom&&e.dom.val(t)},getValue:function(){return this.value},dom2list:function(i,e){var s={},o=this;return e||t("> optgroup",i).each(function(){s[t(this).attr("label")]=o.dom2list(this,!0)}),t("> option",i).each(function(){s[t(this).html()]=this.value}),s},disable:function(){self.wraper.addClass("ui-droplist-disabled"),self.dom&&self.dom.attr("disabled",!0)},enable:function(){self.wraper.addClass("ui-droplist-disabled"),self.dom&&self.dom.removeAttr("disabled")}},i.createListHtml=function(e){var s=[];return t.each(e,function(t,e){s.push("object"==typeof e&&e?'				<li class="ui-droplist-group">					<span href="javascript:;" class="ui-droplist-group-label">'+t+"</span>					<ul>"+i.createListHtml(e)+"</ul>				</li>":'<li class="ui-droplist-item" data-droplist-key="'+t+'" data-droplist-value="'+e+'"><a href="javascript:;">'+t+"</a></li>")}),s.join("")},i.createDomHtml=function(e){var s=[];return t.each(e,function(t,e){s.push("object"==typeof e&&e?'<optgroup label="'+t+'">'+i.createDomHtml(e)+"</optgroup>":'<option value="'+e+'">'+t+"</option>")}),s.join("")},i});