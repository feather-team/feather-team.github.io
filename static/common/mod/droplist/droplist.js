define("/static/common/mod/droplist/droplist.js",function(t,i,s){function e(t){this.options=o.extend({items:{},list:null,dom:null,container:document.body,width:!1,callback:function(){}},t||{}),this.init()}var o=t("common:jquery");e.prototype={init:function(){var t=this,i=t.options;t.value="",t.wraper=o('<div class="ui-droplist"><i class="ui-droplist-arrow"></i></div>').appendTo(i.container),t.select=o('<span class="ui-droplist-select"></span>').appendTo(t.wraper),t.list=o('<ul class="ui-droplist-list"></ul>').appendTo(t.wraper),t.dom=i.dom?o(i.dom):null,t.setList(i.dom||i.list||i.items),t.resetWidth(),t.bindEvent()},bindEvent:function(){var t=this,i=t.options;t.wraper.hover(function(){!t.wraper.hasClass("ui-droplist-disabled")&&t.openList()},function(){t.closeList()}),t.list.delegate(".ui-droplist-item","click",function(){t.closeList();var s=o(this),e=s.attr("data-droplist-key"),l=s.attr("data-droplist-value");i.callback&&i.callback.call(this,e,l),t.setValue(e,l)})},openList:function(){var t=this;t.wraper.addClass("ui-droplist-open"),t.resetWidth()},closeList:function(){this.wraper.removeClass("ui-droplist-open")},setList:function(t,i,s){var l,a=this;if((t.nodeType||t instanceof o||"string"==typeof t)&&(l=o(t),t=a.dom2list(t)),a.list.html(e.createListHtml(t)),a.resetWidth(),a.dom&&(!l||l[0]!==a.dom[0])&&a.resetDom(t),i)a.setValue(i,s);else{var r=o(".ui-droplist-item:first",a.list);a.setValue(r.attr("data-droplist-key"),r.attr("data-droplist-value"))}},resetDom:function(t){this.dom.html(e.createDomHtml(t))},resetWidth:function(){var t=this;t.list.css("width","auto"),t.wraper.add(t.list).css("width",t.options.width||t.list.width())},setValue:function(t,i){var s=this;s.select.html(t),s.value=i,s.dom&&s.dom.val(i)},getValue:function(){return this.value},dom2list:function(t,i){var s={},e=this;return i||o("> optgroup",t).each(function(){s[o(this).attr("label")]=e.dom2list(this,!0)}),o("> option",t).each(function(){s[o(this).html()]=this.value}),s},disable:function(){self.wraper.addClass("ui-droplist-disabled"),self.dom&&self.dom.attr("disabled",!0)},enable:function(){self.wraper.addClass("ui-droplist-disabled"),self.dom&&self.dom.removeAttr("disabled")}},e.createListHtml=function(t){var i=[];return o.each(t,function(t,s){i.push("object"==typeof s&&s?'				<li class="ui-droplist-group">					<span href="javascript:;" class="ui-droplist-group-label">'+t+"</span>					<ul>"+e.createListHtml(s)+"</ul>				</li>":'<li class="ui-droplist-item" data-droplist-key="'+t+'" data-droplist-value="'+s+'"><a href="javascript:;">'+t+"</a></li>")}),i.join("")},e.createDomHtml=function(t){var i=[];return o.each(t,function(t,s){i.push("object"==typeof s&&s?'<optgroup label="'+t+'">'+e.createDomHtml(s)+"</optgroup>":'<option value="'+s+'">'+t+"</option>")}),i.join("")},s.exports=e});