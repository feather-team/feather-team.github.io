define("/static/common/mod/calendar/calendar.js",function(t,e,a){var n=t("common:jquery"),i=t("common:util"),r=i.string.toPad,o=document.body,s=a.exports=function(t){this.options=n.extend({container:o,target:null,handle:null,maxDate:null,minDate:null,dateFormat:"Y-m-d",callback:function(){},onSelect:function(){this.close()}},t||{}),this.init()};return s.prototype={init:function(){var t=this,e=t.options;t.options.target&&(t.target=n(t.options.target)),t.wraper=n('<div class="ui-calendar"></div>'),t.container=n(t.options.container).append(t.wraper),t.container[0]==o&&t.wraper.css("position","absolute"),e.minDate&&(t.minDate="string"==typeof e.minDate?e.minDate:t.getDate(e.minDate)),e.maxDate&&(t.maxDate="string"==typeof e.maxDate?e.maxDate:t.getDate(e.maxDate)),t.toMonth(),t.bindEvent(),t.close()},bindEvent:function(){var t=this,e=t.options,a=e.handle?n(e.handle):t.target;a&&a.click(function(){t.open(),t.resetPosition()}),n(window).on("resize scroll",function(){t.resetPosition()}),t.wraper.click(function(a){var i=n(a.target);if(i.hasClass("ui-calendar-prev"))t.prevMonth();else if(i.hasClass("ui-calendar-next"))t.nextMonth();else if(i.hasClass("ui-calendar-item")&&!i.hasClass("ui-calendar-item-disable")){var r=i.attr("data-calendar-date");e.onSelect&&e.onSelect.call(t,r),t.target&&t.target.val(r).html(r)}})},prevMonth:function(){this.toMonth(this.year,this.month-1)},nextMonth:function(){this.toMonth(this.year,this.month+1)},toMonth:function(t,e){var a=this,n=new Date;t&&n.setFullYear(t),null!=e&&n.setMonth(e),a.year=n.getFullYear(),a.month=n.getMonth(),a.createCalendar(),a.options.callback&&a.options.callback.call(a),a.resetPosition()},createCalendar:function(){var t=this;t.wraper.find(".ui-calendar-container").remove(),n('<table class="ui-calendar-container" />').appendTo(t.wraper).append(t.createCalendarHeader(),t.createCalendarItems())},createCalendarItems:function(){for(var t=this,e=(t.options,new Date(t.year,t.month,1)),a=new Date(t.year,t.month+1,0),n=t.getDate(new Date),i=e.getDay(),r=a.getDate(),o=Math.ceil((i+r)/7),s=[],c=1,l=0;o>l;l++){for(var d=[],h=0;7>h;h++)if(i>h&&0==l||c>r)d.push("<td>&nbsp;</td>");else if(r>=c){var u=t.getDate(new Date(t.year,t.month,c)),p="ui-calendar-item";n==u&&(p+=" ui-calendar-item-today"),(t.minDate&&u<t.minDate||t.maxDate&&u>t.maxDate)&&(p+=" ui-calendar-item-disable"),d.push('<td><a href="javascript:" data-calendar-date="'+u+'" class="'+p+'">'+c++ +"</a></td>")}s.push("<tr>"+d.join("")+"</tr>")}return"<tbody>"+s.join("")+"</tbody>"},createCalendarHeader:function(){var t=[],e=this.year+"."+r(this.month+1,0,2,!0);return n.each(s.WEEKNAME,function(e,a){t.push("<th>"+a+"</th>")}),["<thead>",'<tr class="ui-calendar-title">','<th colspan="7">','<a href="javascript:" class="ui-calendar-next"></a>','<a href="javascript:" class="ui-calendar-prev"></a>','<span class="ui-calendar-date">'+e+"</span>","</th>","</tr>","<tr>"+t.join("")+"</tr>","</thead>"].join("")},open:function(){this.wraper.show(),this.resetPosition()},close:function(){this.wraper.hide()},resetPosition:function(){if(this.target){var t,e=this,a=e.target.offset(),i=document.body.scrollTop||document.documentElement.scrollTop;t=i+n(window).height()<a.top+e.wraper.outerHeight()?a.top-e.wraper.outerHeight()-1:a.top+e.target.outerHeight()+1,e.wraper.css({left:a.left,top:t})}},getDate:function(t){return i.date.date(this.options.dateFormat,t.getTime())}},s.WEEKNAME=["日","一","二","三","四","五","六"],s});