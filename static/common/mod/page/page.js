define("/static/common/mod/page/page.js",function(a){function t(a){this.options=e.extend({dom:null,pageTotal:0,perPage:10,url:"",first:!0,last:!0,currentPage:1,currentPageClassName:"ui-page-current",pageClassName:"",callback:function(){}},a||{}),this.initialize()}var e=a("common:jquery");return t.prototype={initialize:function(){0!=this.options.pageTotal&&(this.container=e('<ul class="ui-page">'),this.dom=e(this.options.dom).empty().append(this.container),this.index=parseInt(this.options.currentPage),this.createPage(),this.bindEvent())},pageTo:function(a){var t=this.options;this.index=a?parseInt(1>a?1:a>t.pageTotal?t.pageTotal:a):this.index,t.callback&&t.callback.call(this,this.index),this.createPage()},bindEvent:function(){var a=this;a.container.delegate("a","click",function(){a.pageTo(e(this).attr("data-page"))})},createPage:function(){var a=this,t=a.getPageResult(),i=a.options;a.container.empty(),e.each(t,function(t,n){var s,o=n[0],p=n[1];s=p!=a.index?e('<li><a href="'+(i.url?i.url+p:"javascript:void(0);")+'" data-page="'+p+'">'+o+"</a></li>").addClass(n[2]):e("<li>"+p+"</li>").addClass(i.currentPageClassName),s.addClass(i.pageClassName).appendTo(a.container)})},getPageResult:function(){var a=this,t=a.options,e=parseInt(t.pageTotal),i=t.perPage,n=this.index,s=0,o=0,p=Math.ceil(i/2),r=parseInt(i/2);i>e?(s=1,o=e):p>=n?(s=1,o=i):n>p&&(e>=n+p?(s=n-p+1,o=n+r):(s=e-i+1,o=e));var l=[];n>1&&l.push([t.previous||"&nbsp;",n-1,"ui-page-previous"]),t.first&&(s>2?l.push(["1..",1]):2==s&&l.push(["1",1]));for(var c=s;o>=c;)l.push([c,c++]);return t.last&&(e-1>o?l.push([".."+e,e]):o==e-1&&l.push([e,e])),e>n&&l.push([t.next||"&nbsp;",n+1,"ui-page-next"]),l}},t});