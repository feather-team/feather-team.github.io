define("/static/common/mod/dialog/dialog.js",function(t){function i(t){this.options=n.extend({title:"",container:s,dom:null,width:400,height:!1,content:"",url:"",esc:!1,mask:!0,autoOpen:!1,buttons:{},handle:null,open:function(){},firstOpen:function(){},close:function(){}},t||{}),this.init()}var n=t("common:jquery"),o=t("common:mask"),s=document.body;return i.prototype={init:function(){this.firstOpenStatus=!1;var t=this.wraper=n(this.options.container);t[0]!=s&&!/fixed|absolute/.test(t.css("position"))&&t.css("position","relative"),this.create(),this.options.autoOpen&&this.open()},create:function(){this.createMask(),this.createContainer(),this.bindEvent()},bindEvent:function(){this.bindClose();var t=this;if(n(window).resize(function(){t.resetPosition()}),this.options.handle){var t=this;n(t.options.handle).click(function(){t.open()})}},createMask:function(){this.options.mask&&(this.mask=new o({autoOpen:!1,container:this.wraper}))},createContainer:function(){var t=this.container=n('<div class="ui-dialog-container">').html(['<div class="ui-dialog-content"></div>'].join("")).appendTo(this.wraper);this.options.title!==!1&&t.prepend(['<strong class="ui-dialog-header">','<a href="javascript:void(0);" class="ui-dialog-close">&times;</a>','<span class="ui-dialog-title">'+this.options.title+"</span>","</strong>"].join("")),this.createButtons(),this.setContent(),t.find(".ui-dialog-content").css({width:this.options.width,height:this.options.height}),t.css("width",this.options.width)},setContent:function(t){var i=this,o=i.options,t=t||o.content,s=i.container.find(".ui-dialog-content");t?s.html(t):o.dom?s.empty().append(n(o.dom).show()):o.url&&i.load(o.url),setTimeout(function(){i.resetPosition()},0)},load:function(t){var i=this;i.container.find(".ui-dialog-content").load(t,function(){i.resetPosition()})},createButtons:function(){if(!n.isEmptyObject(this.options.buttons)){var t=this,i=n('<div class="ui-dialog-buttons">').appendTo(t.container);n.each(t.options.buttons,function(o,s){n.isFunction(s)&&(s={events:{click:s},classname:""});var e=n('<a href="javascript:void(0);" class="ui-dialog-button" />').text(o).appendTo(i);e.addClass(s.classname||s.className),n.each(s.events,function(i,n){e.bind(i,function(){n.call(t,e)})})})}},bindClose:function(){var t=this;t.container.find(".ui-dialog-close").click(function(){t.close()}),t.options.esc&&n(document).keyup(function(i){27==i.keyCode&&t.close()})},setTitle:function(t){this.container.find(".ui-dialog-title").text(t)},resetPosition:function(){this.mask&&this.mask.resetPosition();var t,i=this.wraper[0];i===s?(t="fixed",i=window):t="absolute",this.container.css({left:parseInt((n(i).outerWidth()-this.container.outerWidth())/2),top:parseInt((n(i).outerHeight()-this.container.outerHeight())/2),position:t})},open:function(){this.mask&&this.mask.open(),this.container.show(),this.resetPosition(),this.firstOpenStatus&&n.isFunction(this.options.firstOpen)&&(this.firstOpenStatus=!0,this.options.firstOpen.call(this)),n.isFunction(this.options.open)&&this.options.open.call(this)},close:function(){this.mask&&this.mask.close(),this.container.hide(),n.isFunction(this.options.close)&&this.options.close.call(this)},destory:function(){this.destroy()},destroy:function(){this.mask&&this.mask.destroy(),this.container.remove()}},i});