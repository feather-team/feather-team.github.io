!function(t,i){"function"==typeof define?define("/static/common/mod/dialog/dialog.js",function(t){return i(t("common:jquery"),t("common:mask"))}):(t.FeatherUi=t.FeatherUi||{},t.FeatherUi.Dialog=i(t.jQuery||t.$,t.FeatherUi.Mask))}(window,function(t,i){function n(i){this.options=t.extend({title:"",container:o.body,dom:null,width:400,height:!1,content:"",url:"",esc:!1,mask:!0,autoOpen:!1,buttons:{},handle:null,open:function(){},firstOpen:function(){},close:function(){},className:""},i||{}),this.init()}var o=document;return n.prototype={init:function(){this.firstOpenStatus=!1;var i=this.wraper=t(this.options.container);i[0]!=o.body&&!/fixed|absolute/.test(i.css("position"))&&i.css("position","relative"),this.create(),this.options.autoOpen&&this.open()},create:function(){this.createMask(),this.createContainer(),this.bindEvent()},bindEvent:function(){this.bindClose();var i=this;if(t(window).resize(function(){i.resetPosition()}),this.options.handle){var i=this;t(i.options.handle).click(function(){i.open()})}},createMask:function(){this.options.mask&&(this.mask=new i({autoOpen:!1,container:this.wraper}))},createContainer:function(){var i=this.container=t('<div class="ui-dialog-container">').html(['<div class="ui-dialog-content"></div>'].join("")).appendTo(this.wraper).addClass(this.options.className);i.prepend(['<strong class="ui-dialog-header">','<a href="javascript:void(0);" class="ui-dialog-close">&times;</a>','<span class="ui-dialog-title"></span>',"</strong>"].join("")),this.setTitle(this.options.title),this.createButtons(),this.setContent(),i.find(".ui-dialog-content").css({width:this.options.width,height:this.options.height}),i.css("width",this.options.width)},setContent:function(i){var n=this,o=n.options,i=i||o.content,s=n.container.find(".ui-dialog-content");i?s.html(i):o.dom?s.empty().append(t(o.dom).show()):o.url&&n.load(o.url),setTimeout(function(){n.resetPosition()},0)},load:function(t){var i=this;i.container.find(".ui-dialog-content").load(t,function(){i.resetPosition()})},createButtons:function(){if(!t.isEmptyObject(this.options.buttons)){var i=this,n=t('<div class="ui-dialog-buttons">').appendTo(i.container);t.each(i.options.buttons,function(o,s){t.isFunction(s)&&(s={events:{click:s},classname:""});var e=t('<a href="javascript:void(0);" class="ui-dialog-button" />').text(o).appendTo(n);e.addClass(s.classname||s.className),t.each(s.events,function(t,n){e.bind(t,function(){n.call(i,e)})})})}},bindClose:function(){var i=this;i.container.find(".ui-dialog-close").click(function(){i.close()}),i.options.esc&&t(document).keyup(function(t){27==t.keyCode&&i.close()})},setTitle:function(t){var i=this.container.find(".ui-dialog-header");i.removeClass("ui-dialog-header-nob").show(),t===!1?i.hide():""==t&&i.addClass("ui-dialog-header-nob"),i.find(".ui-dialog-title").html(t)},resetPosition:function(){this.mask&&this.mask.resetPosition();var i,n=this.wraper[0];n===o.body?(i="fixed",n=window):i="absolute",this.container.css({left:parseInt((t(n).outerWidth()-this.container.outerWidth())/2),top:parseInt((t(n).outerHeight()-this.container.outerHeight())/2),position:i})},open:function(){this.mask&&this.mask.open(),this.container.show(),this.resetPosition(),this.firstOpenStatus&&t.isFunction(this.options.firstOpen)&&(this.firstOpenStatus=!0,this.options.firstOpen.call(this)),t.isFunction(this.options.open)&&this.options.open.call(this)},close:function(){this.mask&&this.mask.close(),this.container.hide(),t.isFunction(this.options.close)&&this.options.close.call(this)},destory:function(){this.destroy()},destroy:function(){this.mask&&this.mask.destroy(),this.container.remove()}},n});